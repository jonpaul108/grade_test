(()=>{"use strict";function e(e,t=""){"accept"===t?(e.dataset.type="accept",e.children[2].className="grade_block accept",e.children[1].className="grade_block accept",e.children[0].className="grade_block accept"):"twoWeek"===t?(e.dataset.type="twoWeek",e.children[2].className="grade_block",e.children[1].className="grade_block two-week",e.children[0].className="grade_block two-week"):"fourWeek"===t?(e.dataset.type="fourWeek",e.children[2].className="grade_block",e.children[1].className="grade_block",e.children[0].className="grade_block four-week"):(delete e.dataset.type,e.children[2].className="grade_block",e.children[1].className="grade_block",e.children[0].className="grade_block")}function t(t){const n=document.createElement("div");n.className="grade_container";const a=["fourWeek","twoWeek","accept"];for(let e=0;e<a.length;e++){const t=document.createElement("span");t.setAttribute("data-grade",a[e]),t.classList.add("grade_block"),n.append(t),n.classList.add("skill_item")}return e(n,t),n}function n(e,t){const n=document.createElement("p");n.className="skill_title",n.innerText=t,e.append(n)}function a(e,t,n){const a=document.createElement("p");a.className="sub_data",a.innerText=`${t}: ${n}`,e.append(a)}function s(e,n,a,s){const i=document.createElement("div"),o=document.createElement("div");let l;if(o.className="section_title",o.innerText=n,i.className=a,i.append(o),"Debugging"===n)l=n.toLowerCase();else{const e=n.toLowerCase().split(" ");l=e[0]+e[1][0].toUpperCase()+e[1].slice(1)}if(0===s){const e=document.createElement("p");return e.innerText="N/A",e.className="n_a",i.append(e),i}for(const n of e){const e=document.createElement("div"),a=document.createElement("span"),s=t();a.innerText=n,e.setAttribute("data-skill",n),e.setAttribute("data-category",l),e.classList.add("skill"),e.classList.add("flex_column"),a.classList.add("essential_skill_title"),s.classList.add("skill_bars"),e.append(a),e.append(s),i.append(e)}return i}function i(t){const{className:n}=t.target;if(!n.includes("grade_block"))return;const{grades:a,gradeUpdate:s}=this,{parentElement:i}=t.target,{skill:o}=i.parentElement.dataset;let{grade:l}=t.target.dataset;console.log("grade:",l,i.dataset.type,a),l===i.dataset.type&&(l="");const r=i.dataset.category||i.parentElement.dataset.category;e(i,l),function(e,t,n,a){"autonomy"!==n&&"horsepower"!==n?e[n][a]=t:e[n]=t}(a,l,r,o),s()}function o(e,t){if(0===t)return"N/A";const{accept:n,twoWeek:a}=e;return n>=1?"accept":a>=1?"twoWeek":"fourWeek"}function l(e){const{categoryScores:t,grades:n}=this;return this.prompt[e].reduce(((t,a)=>(n[e][a]&&t[n[e][a]]++,t)),t[e])}class r{constructor(e,t,n){this.grades=e,this.prompt=t,this.student=n,this.currGrades={},this.categoryCount=this.countCategories(),this.categoryScores={essentialSkills:{accept:0,twoWeek:0,fourWeek:0},problemSolving:{accept:0,twoWeek:0,fourWeek:0},debugging:{accept:0,twoWeek:0,fourWeek:0}},this.promptEl=document.createElement("div"),this.gradeUpdate=this.gradeUpdate.bind(this),this.handleSkillClick=i.bind(this)}gradeUpdate(){const{grades:e}=this,{essentialSkills:t,debugging:n,problemSolving:a}=this.categoryCount,s=l.call(this,"essentialSkills"),i=l.call(this,"problemSolving"),r=l.call(this,"debugging");e.essentialGrade=function(e,t){const{accept:n,twoWeek:a,fourWeek:s}=e,i=Math.floor(t/2)||1;return!s&&n>=i?"accept":!s<=1&&n+a>=i?"twoWeek":"fourWeek"}(s,t),e.problemSolvingGrad=o(i,a),e.debuggingGrade=o(r,n)}countCategories=()=>{const{debugging:e,problemSolving:t,essentialSkills:n}=this.prompt;return{debugging:e.length,problemSolving:t.length,essentialSkills:n.length}};createGradeContainer(){const{grades:e,prompt:i,student:o,handleSkillClick:l,categoryCount:r,promptEl:c}=this,{horsepower:d,autonomy:p}=e,m=document.createElement("span"),u=document.createElement("span"),g=document.createElement("div"),h=document.createElement("div"),k=t(d),b=t(p);return m.innerText=`${i.promptNum}: ${i.promptName}`,h.innerText="Grade",c.className="prompt",u.className="grading",m.className="promptNum",h.className="prompt_grade grey-text",g.className="horsepower_autonomy_container flex-row",k.dataset.category="horsepower",b.dataset.category="autonomy",n(k,"Horsepower"),n(b,"Autonomy"),a(k,"time",o.time),a(b,"requests",o.helpRequests),g.append(k),g.append(b),u.append(g),u.append(function(e){const n=document.createElement("div"),a=document.createElement("div");n.className="essential_skill-container",a.className="section_title",a.innerText="Essential Skills",n.append(a);for(const a of e){const e=document.createElement("div"),s=document.createElement("span"),i=t();s.innerText=a,e.setAttribute("data-skill",a),e.setAttribute("data-category","essentialSkills"),e.classList.add("skill"),e.classList.add("flex_column"),s.classList.add("essential_skill_title"),i.classList.add("skill_bars"),e.append(s),e.append(i),n.append(e)}return n}(i.essentialSkills)),u.append(s(i.debugging,"Debugging","debugging_skills_container",r.debugging)),u.append(s(i.problemSolving,"Problem Solving","problem_solving_skills_container",r.problemSolving)),u.append(h),c.append(m),c.append(u),c.addEventListener("click",l),c}}const c={TAA:"Weather",TAANum:1,prompts:[{promptNum:4,promptName:"Share Your Thinking",essentialSkills:["Code Comprehension"],debugging:[],problemSolving:[],acceptTimeLimit:300,twoWeekTimeLimit:420},{promptNum:5,promptName:"Assertion Tests",essentialSkills:["Function Knowledge"],debugging:[],problemSolving:[],acceptTimeLimit:300,twoWeekTimeLimit:420},{promptNum:7,promptName:"Filtering Temperatures - Debug",essentialSkills:["Array Knowledge","For Loops"],debugging:["Intentional Console.logging","Interpreting Error Messages","Understands Bugs Before Making Changes","Detailed Walkthrough"],problemSolving:["Prompt Comprehension"],acceptTimeLimit:1e3,twoWeekTimeLimit:1180},{promptNum:9,promptName:"Get Temperature Data",essentialSkills:["Dot versus Bracket Notation","Object Knowledge","Objects Versus Arrays","Nested Structures Traversal","Concatenation and Reassignment","Data Types","Execution Flow - variable assignment","Execution Flow - conditionals assignment","Execution Flow - return statements"],debugging:["Intentional Console.logging","Interpreting Error Messages","Understands Bugs Before Making Changes","Detailed Walkthrough"],problemSolving:["Input Versus Output","Pseudocode","This time ","Prompt Comprehension"],acceptTimeLimit:1500,twoWeekTimeLimit:2e3}]},d=[{prompt:4,title:"code Reading",selection1:"Student described the high level functionality of a palidrome detection algorithym.",selection2:"Student accurately explained majority of the line by line expression functionality.",selection3:"Student inaccurately explained majority of line by line expression functionality. ",time:160,helpRequests:0},{prompt:5,title:"Basic Functions",selection1:"Student quickly implemented ",selection2:"Student accurately explained majority of the line by line expression functionality.",selection3:"Student inaccurately explained majority of line by line expression functionality. ",time:310,helpRequests:2},{prompt:7,title:"Basic Functions",selection1:"Student quickly implemented ",selection2:"Student accurately explained majority of the line by line expression functionality.",selection3:"Student inaccurately explained majority of line by line expression functionality. ",time:1300,helpRequests:1},{prompt:9,title:"Basic Functions",selection1:"Student quickly implemented ",selection2:"Student accurately explained majority of the line by line expression functionality.",selection3:"Student inaccurately explained majority of line by line expression functionality. ",time:1500,helpRequests:3}];function p(e){const{grades:t,promptEl:n}=this,a=n.querySelector(".prompt_grade"),s=(({autonomy:e,horsepower:t,essentialGrade:n,debuggingGrade:a,problemSolvingGrade:s})=>[e,t,n,a,s])(t);let i=0;const o=s.reduce(((e,t)=>("N/A"!==t&&t&&(e[t]=e[t]?e[t]+1:1,i++),e)),{}),{accept:l,twoWeek:r,fourWeek:c}=o;let d,p=i<4?3:i-1;!c&&l>=p?(a.innerText="Accept",a.className="prompt_grade green-text",d="Accept"):(!c||c<=1)&&(r+l||r)>=p?(a.innerText="Two Week",a.className="prompt_grade yellow-text",d="Two Week"):c?(a.innerText="Four Week",a.className="prompt_grade red-text",d="Four Week"):(a.innerText="N/A",a.className="prompt_grade grey-text",d="N/A"),t.promptGrade=d}function m(){const{finalGrade:e}=this.state,{handleFinalGrade:t}=this,n=document.createElement("div"),a=document.createElement("button");a.id="grade_all_btn",a.className="btn grade_all_btn",a.innerText="Grade",n.className="header flex_row",a.addEventListener("click",t);const s=`\n    <div class="grade_display_container">\n      <span>Grade:</span><span id="final_grade">${e||""}</span>\n    </div>\n  `;return n.innerHTML=s,n.append(a),n}const u=document.getElementById("app"),g=new class{constructor(){this.state={grades:[],totalHelpRequests:0,finalGrade:""},this.header=m.bind(this),this.handleFinalGrade=this.handleFinalGrade.bind(this),this.calculateFinalGrade=this.calculateFinalGrade.bind(this),this.changeFinalGrade=this.changeFinalGrade.bind(this)}getTAAData(){}getStudentData(){}handleFinalGrade(e){const{calculateFinalGrade:t}=this,{grades:n}=this.state;t(),console.log("final",this.state.finalGrade),this.changeFinalGrade(this.state.finalGrade)}calculateFinalGrade(){const{grades:e}=this.state,t=e.reduce(((e,t)=>{const{promptGrade:n}=t;return e[n]=e[n]?e[n]+1:1,e}),{});console.log(t);const{"Four Week":n,"Two Week":a,Accept:s}=t;console.log(n,a,s,t),this.state.finalGrade=!n&&s>=3?"Accept":!n&&a?"Two Week":n?"Four Week":"N/A"}changeFinalGrade(e=""){const t=document.getElementById("final_grade"),n=e.toLowerCase(),a="accept"===n?"green-text":"two week"===n?"yellow-text":"red-text";t.innerText=e,t.className=a}view(){const{prompts:e}=c,{grades:t}=this.state,{header:n}=this,a=document.createElement("div"),s=n();return function(e,t,n){const{prompts:a}=t;e.forEach(((e,t)=>{const{essentialSkills:s,debugging:i,problemSolving:o,acceptTimeLimit:l,twoWeekTimeLimit:r}=a[t],c=function(e,t,n){const{time:a,helpRequests:s}=e;return{horsepower:a<=t?"accept":a<=n?"twoWeek":"fourWeek",autonomy:e.helpRequests<=1?"accept":s<=2?"twoWeek":"fourWeek"}}(e,l,r),d={...c,essentialSkills:{},problemSolving:{},debugging:{}};s.forEach((e=>d.essentialSkills[e]="")),i.forEach((e=>d.debugging[e]="")),o.forEach((e=>d.problemSolving[e]="")),d.essentialGrade="",d.debuggingGrade="",d.problemSolvingGrade="",d.promptGrade="",n.push(d)}))}(d,c,t),a.className="app_container",a.append(s),t.forEach(((t,n)=>{const s=new r(t,e[n],d[n]),i=s.createGradeContainer(),o=document.createElement("button"),l=p.bind(s);o.className="btn prompt_grade_btn",o.innerText="Grade Prompt",o.addEventListener("click",l),i.append(o),a.append(i)})),a}};u.append(g.view())})();